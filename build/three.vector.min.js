// threejs.org/license
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).THREE_VEC={})}(this,(function(t){"use strict";for(var i=[],e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16);var r=1234567,n={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&e]+i[e>>8&255]+"-"+i[e>>16&15|64]+i[e>>24&255]+"-"+i[63&r|128]+i[r>>8&255]+"-"+i[r>>16&255]+i[r>>24&255]+i[255&n]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]).toUpperCase()},clamp:function(t,i,e){return Math.max(i,Math.min(e,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,e,r,n){return r+(t-i)*(n-r)/(e-i)},lerp:function(t,i,e){return(1-e)*t+e*i},smoothstep:function(t,i,e){return t<=i?0:t>=e?1:(t=(t-i)/(e-i))*t*(3-2*t)},smootherstep:function(t,i,e){return t<=i?0:t>=e?1:(t=(t-i)/(e-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(r=t%2147483647),((r=16807*r%2147483647)-1)/2147483646},degToRad:function(t){return t*n.DEG2RAD},radToDeg:function(t){return t*n.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,e,r,n){var s=Math.cos,o=Math.sin,h=s(e/2),a=o(e/2),u=s((i+r)/2),c=o((i+r)/2),l=s((i-r)/2),y=o((i-r)/2),p=s((r-i)/2),f=o((r-i)/2);switch(n){case"XYX":t.set(h*c,a*l,a*y,h*u);break;case"YZY":t.set(a*y,h*c,a*l,h*u);break;case"ZXZ":t.set(a*l,a*y,h*c,h*u);break;case"XZX":t.set(h*c,a*f,a*p,h*u);break;case"YXY":t.set(a*p,h*c,a*f,h*u);break;case"ZYZ":t.set(a*f,a*p,h*c,h*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}};function s(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}var h=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=i}var i=t.prototype;return i.set=function(t,i){return this.x=t,this.y=i,this},i.setScalar=function(t){return this.x=t,this.y=t,this},i.setX=function(t){return this.x=t,this},i.setY=function(t){return this.y=t,this},i.setComponent=function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this},i.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},i.clone=function(){return new this.constructor(this.x,this.y)},i.copy=function(t){return this.x=t.x,this.y=t.y,this},i.add=function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},i.addScalar=function(t){return this.x+=t,this.y+=t,this},i.addVectors=function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},i.addScaledVector=function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},i.sub=function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},i.subScalar=function(t){return this.x-=t,this.y-=t,this},i.subVectors=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},i.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.divideScalar=function(t){return this.multiplyScalar(1/t)},i.applyMatrix3=function(t){var i=this.x,e=this.y,r=t.elements;return this.x=r[0]*i+r[3]*e+r[6],this.y=r[1]*i+r[4]*e+r[7],this},i.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},i.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},i.clamp=function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},i.clampScalar=function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this},i.clampLength=function(t,i){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(i,e)))},i.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},i.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},i.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},i.negate=function(){return this.x=-this.x,this.y=-this.y,this},i.dot=function(t){return this.x*t.x+this.y*t.y},i.cross=function(t){return this.x*t.y-this.y*t.x},i.lengthSq=function(){return this.x*this.x+this.y*this.y},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},i.normalize=function(){return this.divideScalar(this.length()||1)},i.angle=function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},i.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},i.distanceToSquared=function(t){var i=this.x-t.x,e=this.y-t.y;return i*i+e*e},i.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},i.setLength=function(t){return this.normalize().multiplyScalar(t)},i.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},i.lerpVectors=function(t,i,e){return this.x=t.x+(i.x-t.x)*e,this.y=t.y+(i.y-t.y)*e,this},i.equals=function(t){return t.x===this.x&&t.y===this.y},i.fromArray=function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},i.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},i.fromBufferAttribute=function(t,i,e){return void 0!==e&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this},i.rotateAround=function(t,i){var e=Math.cos(i),r=Math.sin(i),n=this.x-t.x,s=this.y-t.y;return this.x=n*e-s*r+t.x,this.y=n*r+s*e+t.y,this},i.random=function(){return this.x=Math.random(),this.y=Math.random(),this},o(t,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),t}(),a=function(){function t(t,i,e,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===r&&(r=1),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=i,this._z=e,this._w=r}t.slerp=function(t,i,e,r){return e.copy(t).slerp(i,r)},t.slerpFlat=function(t,i,e,r,n,s,o){var h=e[r+0],a=e[r+1],u=e[r+2],c=e[r+3],l=n[s+0],y=n[s+1],p=n[s+2],f=n[s+3];if(c!==f||h!==l||a!==y||u!==p){var v=1-o,x=h*l+a*y+u*p+c*f,m=x>=0?1:-1,g=1-x*x;if(g>Number.EPSILON){var d=Math.sqrt(g),b=Math.atan2(d,x*m);v=Math.sin(v*b)/d,o=Math.sin(o*b)/d}var w=o*m;if(h=h*v+l*w,a=a*v+y*w,u=u*v+p*w,c=c*v+f*w,v===1-o){var M=1/Math.sqrt(h*h+a*a+u*u+c*c);h*=M,a*=M,u*=M,c*=M}}t[i]=h,t[i+1]=a,t[i+2]=u,t[i+3]=c},t.multiplyQuaternionsFlat=function(t,i,e,r,n,s){var o=e[r],h=e[r+1],a=e[r+2],u=e[r+3],c=n[s],l=n[s+1],y=n[s+2],p=n[s+3];return t[i]=o*p+u*c+h*y-a*l,t[i+1]=h*p+u*l+a*c-o*y,t[i+2]=a*p+u*y+o*l-h*c,t[i+3]=u*p-o*c-h*l-a*y,t};var i=t.prototype;return i.set=function(t,i,e,r){return this._x=t,this._y=i,this._z=e,this._w=r,this._onChangeCallback(),this},i.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},i.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},i.setFromEuler=function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var e=t._x,r=t._y,n=t._z,s=t._order,o=Math.cos,h=Math.sin,a=o(e/2),u=o(r/2),c=o(n/2),l=h(e/2),y=h(r/2),p=h(n/2);switch(s){case"XYZ":this._x=l*u*c+a*y*p,this._y=a*y*c-l*u*p,this._z=a*u*p+l*y*c,this._w=a*u*c-l*y*p;break;case"YXZ":this._x=l*u*c+a*y*p,this._y=a*y*c-l*u*p,this._z=a*u*p-l*y*c,this._w=a*u*c+l*y*p;break;case"ZXY":this._x=l*u*c-a*y*p,this._y=a*y*c+l*u*p,this._z=a*u*p+l*y*c,this._w=a*u*c-l*y*p;break;case"ZYX":this._x=l*u*c-a*y*p,this._y=a*y*c+l*u*p,this._z=a*u*p-l*y*c,this._w=a*u*c+l*y*p;break;case"YZX":this._x=l*u*c+a*y*p,this._y=a*y*c+l*u*p,this._z=a*u*p-l*y*c,this._w=a*u*c-l*y*p;break;case"XZY":this._x=l*u*c-a*y*p,this._y=a*y*c-l*u*p,this._z=a*u*p+l*y*c,this._w=a*u*c+l*y*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==i&&this._onChangeCallback(),this},i.setFromAxisAngle=function(t,i){var e=i/2,r=Math.sin(e);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(e),this._onChangeCallback(),this},i.setFromRotationMatrix=function(t){var i=t.elements,e=i[0],r=i[4],n=i[8],s=i[1],o=i[5],h=i[9],a=i[2],u=i[6],c=i[10],l=e+o+c;if(l>0){var y=.5/Math.sqrt(l+1);this._w=.25/y,this._x=(u-h)*y,this._y=(n-a)*y,this._z=(s-r)*y}else if(e>o&&e>c){var p=2*Math.sqrt(1+e-o-c);this._w=(u-h)/p,this._x=.25*p,this._y=(r+s)/p,this._z=(n+a)/p}else if(o>c){var f=2*Math.sqrt(1+o-e-c);this._w=(n-a)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(h+u)/f}else{var v=2*Math.sqrt(1+c-e-o);this._w=(s-r)/v,this._x=(n+a)/v,this._y=(h+u)/v,this._z=.25*v}return this._onChangeCallback(),this},i.setFromUnitVectors=function(t,i){var e=t.dot(i)+1;return e<1e-6?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=e),this.normalize()},i.angleTo=function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},i.rotateTowards=function(t,i){var e=this.angleTo(t);if(0===e)return this;var r=Math.min(1,i/e);return this.slerp(t,r),this},i.identity=function(){return this.set(0,0,0,1)},i.inverse=function(){return this.conjugate()},i.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},i.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},i.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},i.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},i.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},i.multiply=function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},i.premultiply=function(t){return this.multiplyQuaternions(t,this)},i.multiplyQuaternions=function(t,i){var e=t._x,r=t._y,n=t._z,s=t._w,o=i._x,h=i._y,a=i._z,u=i._w;return this._x=e*u+s*o+r*a-n*h,this._y=r*u+s*h+n*o-e*a,this._z=n*u+s*a+e*h-r*o,this._w=s*u-e*o-r*h-n*a,this._onChangeCallback(),this},i.slerp=function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this._x,r=this._y,n=this._z,s=this._w,o=s*t._w+e*t._x+r*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=e,this._y=r,this._z=n,this;var h=1-o*o;if(h<=Number.EPSILON){var a=1-i;return this._w=a*s+i*this._w,this._x=a*e+i*this._x,this._y=a*r+i*this._y,this._z=a*n+i*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(h),c=Math.atan2(u,o),l=Math.sin((1-i)*c)/u,y=Math.sin(i*c)/u;return this._w=s*l+this._w*y,this._x=e*l+this._x*y,this._y=r*l+this._y*y,this._z=n*l+this._z*y,this._onChangeCallback(),this},i.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},i.fromArray=function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},i.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},i.fromBufferAttribute=function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},i._onChange=function(t){return this._onChangeCallback=t,this},i._onChangeCallback=function(){},o(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}]),t}(),u=function(){function t(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=i,this.z=e}var i=t.prototype;return i.set=function(t,i,e){return void 0===e&&(e=this.z),this.x=t,this.y=i,this.z=e,this},i.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this},i.setX=function(t){return this.x=t,this},i.setY=function(t){return this.y=t,this},i.setZ=function(t){return this.z=t,this},i.setComponent=function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},i.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},i.clone=function(){return new this.constructor(this.x,this.y,this.z)},i.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.add=function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},i.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},i.addVectors=function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},i.addScaledVector=function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},i.sub=function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},i.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},i.subVectors=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},i.multiply=function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},i.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.multiplyVectors=function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},i.applyEuler=function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(l.setFromEuler(t))},i.applyAxisAngle=function(t,i){return this.applyQuaternion(l.setFromAxisAngle(t,i))},i.applyMatrix3=function(t){var i=this.x,e=this.y,r=this.z,n=t.elements;return this.x=n[0]*i+n[3]*e+n[6]*r,this.y=n[1]*i+n[4]*e+n[7]*r,this.z=n[2]*i+n[5]*e+n[8]*r,this},i.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()},i.applyMatrix4=function(t){var i=this.x,e=this.y,r=this.z,n=t.elements,s=1/(n[3]*i+n[7]*e+n[11]*r+n[15]);return this.x=(n[0]*i+n[4]*e+n[8]*r+n[12])*s,this.y=(n[1]*i+n[5]*e+n[9]*r+n[13])*s,this.z=(n[2]*i+n[6]*e+n[10]*r+n[14])*s,this},i.applyQuaternion=function(t){var i=this.x,e=this.y,r=this.z,n=t.x,s=t.y,o=t.z,h=t.w,a=h*i+s*r-o*e,u=h*e+o*i-n*r,c=h*r+n*e-s*i,l=-n*i-s*e-o*r;return this.x=a*h+l*-n+u*-o-c*-s,this.y=u*h+l*-s+c*-n-a*-o,this.z=c*h+l*-o+a*-s-u*-n,this},i.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},i.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},i.transformDirection=function(t){var i=this.x,e=this.y,r=this.z,n=t.elements;return this.x=n[0]*i+n[4]*e+n[8]*r,this.y=n[1]*i+n[5]*e+n[9]*r,this.z=n[2]*i+n[6]*e+n[10]*r,this.normalize()},i.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},i.divideScalar=function(t){return this.multiplyScalar(1/t)},i.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},i.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},i.clamp=function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},i.clampScalar=function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},i.clampLength=function(t,i){var e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(i,e)))},i.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},i.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},i.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},i.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},i.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},i.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},i.normalize=function(){return this.divideScalar(this.length()||1)},i.setLength=function(t){return this.normalize().multiplyScalar(t)},i.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},i.lerpVectors=function(t,i,e){return this.x=t.x+(i.x-t.x)*e,this.y=t.y+(i.y-t.y)*e,this.z=t.z+(i.z-t.z)*e,this},i.cross=function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},i.crossVectors=function(t,i){var e=t.x,r=t.y,n=t.z,s=i.x,o=i.y,h=i.z;return this.x=r*h-n*o,this.y=n*s-e*h,this.z=e*o-r*s,this},i.projectOnVector=function(t){var i=t.lengthSq();if(0===i)return this.set(0,0,0);var e=t.dot(this)/i;return this.copy(t).multiplyScalar(e)},i.projectOnPlane=function(t){return c.copy(this).projectOnVector(t),this.sub(c)},i.reflect=function(t){return this.sub(c.copy(t).multiplyScalar(2*this.dot(t)))},i.angleTo=function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;var e=this.dot(t)/i;return Math.acos(n.clamp(e,-1,1))},i.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},i.distanceToSquared=function(t){var i=this.x-t.x,e=this.y-t.y,r=this.z-t.z;return i*i+e*e+r*r},i.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},i.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},i.setFromSphericalCoords=function(t,i,e){var r=Math.sin(i)*t;return this.x=r*Math.sin(e),this.y=Math.cos(i)*t,this.z=r*Math.cos(e),this},i.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},i.setFromCylindricalCoords=function(t,i,e){return this.x=t*Math.sin(i),this.y=e,this.z=t*Math.cos(i),this},i.setFromMatrixPosition=function(t){var i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this},i.setFromMatrixScale=function(t){var i=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=e,this.z=r,this},i.setFromMatrixColumn=function(t,i){return this.fromArray(t.elements,4*i)},i.setFromMatrix3Column=function(t,i){return this.fromArray(t.elements,3*i)},i.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},i.fromArray=function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},i.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},i.fromBufferAttribute=function(t,i,e){return void 0!==e&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this},i.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this},t}(),c=new u,l=new a,y=function(){function t(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var i=t.prototype;return i.set=function(t,i,e,r,n,s,o,h,a,u,c,l,y,p,f,v){var x=this.elements;return x[0]=t,x[4]=i,x[8]=e,x[12]=r,x[1]=n,x[5]=s,x[9]=o,x[13]=h,x[2]=a,x[6]=u,x[10]=c,x[14]=l,x[3]=y,x[7]=p,x[11]=f,x[15]=v,this},i.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},i.clone=function(){return(new t).fromArray(this.elements)},i.copy=function(t){var i=this.elements,e=t.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],this},i.copyPosition=function(t){var i=this.elements,e=t.elements;return i[12]=e[12],i[13]=e[13],i[14]=e[14],this},i.extractBasis=function(t,i,e){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this},i.makeBasis=function(t,i,e){return this.set(t.x,i.x,e.x,0,t.y,i.y,e.y,0,t.z,i.z,e.z,0,0,0,0,1),this},i.extractRotation=function(t){var i=this.elements,e=t.elements,r=1/p.setFromMatrixColumn(t,0).length(),n=1/p.setFromMatrixColumn(t,1).length(),s=1/p.setFromMatrixColumn(t,2).length();return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=0,i[4]=e[4]*n,i[5]=e[5]*n,i[6]=e[6]*n,i[7]=0,i[8]=e[8]*s,i[9]=e[9]*s,i[10]=e[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},i.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=this.elements,e=t.x,r=t.y,n=t.z,s=Math.cos(e),o=Math.sin(e),h=Math.cos(r),a=Math.sin(r),u=Math.cos(n),c=Math.sin(n);if("XYZ"===t.order){var l=s*u,y=s*c,p=o*u,f=o*c;i[0]=h*u,i[4]=-h*c,i[8]=a,i[1]=y+p*a,i[5]=l-f*a,i[9]=-o*h,i[2]=f-l*a,i[6]=p+y*a,i[10]=s*h}else if("YXZ"===t.order){var v=h*u,x=h*c,m=a*u,g=a*c;i[0]=v+g*o,i[4]=m*o-x,i[8]=s*a,i[1]=s*c,i[5]=s*u,i[9]=-o,i[2]=x*o-m,i[6]=g+v*o,i[10]=s*h}else if("ZXY"===t.order){var d=h*u,b=h*c,w=a*u,M=a*c;i[0]=d-M*o,i[4]=-s*c,i[8]=w+b*o,i[1]=b+w*o,i[5]=s*u,i[9]=M-d*o,i[2]=-s*a,i[6]=o,i[10]=s*h}else if("ZYX"===t.order){var z=s*u,_=s*c,C=o*u,S=o*c;i[0]=h*u,i[4]=C*a-_,i[8]=z*a+S,i[1]=h*c,i[5]=S*a+z,i[9]=_*a-C,i[2]=-a,i[6]=o*h,i[10]=s*h}else if("YZX"===t.order){var A=s*h,k=s*a,P=o*h,T=o*a;i[0]=h*u,i[4]=T-A*c,i[8]=P*c+k,i[1]=c,i[5]=s*u,i[9]=-o*u,i[2]=-a*u,i[6]=k*c+P,i[10]=A-T*c}else if("XZY"===t.order){var O=s*h,E=s*a,R=o*h,L=o*a;i[0]=h*u,i[4]=-c,i[8]=a*u,i[1]=O*c+L,i[5]=s*u,i[9]=E*c-R,i[2]=R*c-E,i[6]=o*u,i[10]=L*c+O}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},i.makeRotationFromQuaternion=function(t){return this.compose(v,t,x)},i.lookAt=function(t,i,e){var r=this.elements;return d.subVectors(t,i),0===d.lengthSq()&&(d.z=1),d.normalize(),m.crossVectors(e,d),0===m.lengthSq()&&(1===Math.abs(e.z)?d.x+=1e-4:d.z+=1e-4,d.normalize(),m.crossVectors(e,d)),m.normalize(),g.crossVectors(d,m),r[0]=m.x,r[4]=g.x,r[8]=d.x,r[1]=m.y,r[5]=g.y,r[9]=d.y,r[2]=m.z,r[6]=g.z,r[10]=d.z,this},i.multiply=function(t,i){return void 0!==i?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},i.premultiply=function(t){return this.multiplyMatrices(t,this)},i.multiplyMatrices=function(t,i){var e=t.elements,r=i.elements,n=this.elements,s=e[0],o=e[4],h=e[8],a=e[12],u=e[1],c=e[5],l=e[9],y=e[13],p=e[2],f=e[6],v=e[10],x=e[14],m=e[3],g=e[7],d=e[11],b=e[15],w=r[0],M=r[4],z=r[8],_=r[12],C=r[1],S=r[5],A=r[9],k=r[13],P=r[2],T=r[6],O=r[10],E=r[14],R=r[3],L=r[7],N=r[11],V=r[15];return n[0]=s*w+o*C+h*P+a*R,n[4]=s*M+o*S+h*T+a*L,n[8]=s*z+o*A+h*O+a*N,n[12]=s*_+o*k+h*E+a*V,n[1]=u*w+c*C+l*P+y*R,n[5]=u*M+c*S+l*T+y*L,n[9]=u*z+c*A+l*O+y*N,n[13]=u*_+c*k+l*E+y*V,n[2]=p*w+f*C+v*P+x*R,n[6]=p*M+f*S+v*T+x*L,n[10]=p*z+f*A+v*O+x*N,n[14]=p*_+f*k+v*E+x*V,n[3]=m*w+g*C+d*P+b*R,n[7]=m*M+g*S+d*T+b*L,n[11]=m*z+g*A+d*O+b*N,n[15]=m*_+g*k+d*E+b*V,this},i.multiplyScalar=function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},i.determinant=function(){var t=this.elements,i=t[0],e=t[4],r=t[8],n=t[12],s=t[1],o=t[5],h=t[9],a=t[13],u=t[2],c=t[6],l=t[10],y=t[14];return t[3]*(+n*h*c-r*a*c-n*o*l+e*a*l+r*o*y-e*h*y)+t[7]*(+i*h*y-i*a*l+n*s*l-r*s*y+r*a*u-n*h*u)+t[11]*(+i*a*c-i*o*y-n*s*c+e*s*y+n*o*u-e*a*u)+t[15]*(-r*o*u-i*h*c+i*o*l+r*s*c-e*s*l+e*h*u)},i.transpose=function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},i.setPosition=function(t,i,e){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=i,r[14]=e),this},i.getInverse=function(t,i){void 0!==i&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var e=this.elements,r=t.elements,n=r[0],s=r[1],o=r[2],h=r[3],a=r[4],u=r[5],c=r[6],l=r[7],y=r[8],p=r[9],f=r[10],v=r[11],x=r[12],m=r[13],g=r[14],d=r[15],b=p*g*l-m*f*l+m*c*v-u*g*v-p*c*d+u*f*d,w=x*f*l-y*g*l-x*c*v+a*g*v+y*c*d-a*f*d,M=y*m*l-x*p*l+x*u*v-a*m*v-y*u*d+a*p*d,z=x*p*c-y*m*c-x*u*f+a*m*f+y*u*g-a*p*g,_=n*b+s*w+o*M+h*z;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var C=1/_;return e[0]=b*C,e[1]=(m*f*h-p*g*h-m*o*v+s*g*v+p*o*d-s*f*d)*C,e[2]=(u*g*h-m*c*h+m*o*l-s*g*l-u*o*d+s*c*d)*C,e[3]=(p*c*h-u*f*h-p*o*l+s*f*l+u*o*v-s*c*v)*C,e[4]=w*C,e[5]=(y*g*h-x*f*h+x*o*v-n*g*v-y*o*d+n*f*d)*C,e[6]=(x*c*h-a*g*h-x*o*l+n*g*l+a*o*d-n*c*d)*C,e[7]=(a*f*h-y*c*h+y*o*l-n*f*l-a*o*v+n*c*v)*C,e[8]=M*C,e[9]=(x*p*h-y*m*h-x*s*v+n*m*v+y*s*d-n*p*d)*C,e[10]=(a*m*h-x*u*h+x*s*l-n*m*l-a*s*d+n*u*d)*C,e[11]=(y*u*h-a*p*h-y*s*l+n*p*l+a*s*v-n*u*v)*C,e[12]=z*C,e[13]=(y*m*o-x*p*o+x*s*f-n*m*f-y*s*g+n*p*g)*C,e[14]=(x*u*o-a*m*o-x*s*c+n*m*c+a*s*g-n*u*g)*C,e[15]=(a*p*o-y*u*o+y*s*c-n*p*c-a*s*f+n*u*f)*C,this},i.scale=function(t){var i=this.elements,e=t.x,r=t.y,n=t.z;return i[0]*=e,i[4]*=r,i[8]*=n,i[1]*=e,i[5]*=r,i[9]*=n,i[2]*=e,i[6]*=r,i[10]*=n,i[3]*=e,i[7]*=r,i[11]*=n,this},i.getMaxScaleOnAxis=function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,e,r))},i.makeTranslation=function(t,i,e){return this.set(1,0,0,t,0,1,0,i,0,0,1,e,0,0,0,1),this},i.makeRotationX=function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,i,-e,0,0,e,i,0,0,0,0,1),this},i.makeRotationY=function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,0,e,0,0,1,0,0,-e,0,i,0,0,0,0,1),this},i.makeRotationZ=function(t){var i=Math.cos(t),e=Math.sin(t);return this.set(i,-e,0,0,e,i,0,0,0,0,1,0,0,0,0,1),this},i.makeRotationAxis=function(t,i){var e=Math.cos(i),r=Math.sin(i),n=1-e,s=t.x,o=t.y,h=t.z,a=n*s,u=n*o;return this.set(a*s+e,a*o-r*h,a*h+r*o,0,a*o+r*h,u*o+e,u*h-r*s,0,a*h-r*o,u*h+r*s,n*h*h+e,0,0,0,0,1),this},i.makeScale=function(t,i,e){return this.set(t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1),this},i.makeShear=function(t,i,e){return this.set(1,i,e,0,t,1,e,0,t,i,1,0,0,0,0,1),this},i.compose=function(t,i,e){var r=this.elements,n=i._x,s=i._y,o=i._z,h=i._w,a=n+n,u=s+s,c=o+o,l=n*a,y=n*u,p=n*c,f=s*u,v=s*c,x=o*c,m=h*a,g=h*u,d=h*c,b=e.x,w=e.y,M=e.z;return r[0]=(1-(f+x))*b,r[1]=(y+d)*b,r[2]=(p-g)*b,r[3]=0,r[4]=(y-d)*w,r[5]=(1-(l+x))*w,r[6]=(v+m)*w,r[7]=0,r[8]=(p+g)*M,r[9]=(v-m)*M,r[10]=(1-(l+f))*M,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},i.decompose=function(t,i,e){var r=this.elements,n=p.set(r[0],r[1],r[2]).length(),s=p.set(r[4],r[5],r[6]).length(),o=p.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],f.copy(this);var h=1/n,a=1/s,u=1/o;return f.elements[0]*=h,f.elements[1]*=h,f.elements[2]*=h,f.elements[4]*=a,f.elements[5]*=a,f.elements[6]*=a,f.elements[8]*=u,f.elements[9]*=u,f.elements[10]*=u,i.setFromRotationMatrix(f),e.x=n,e.y=s,e.z=o,this},i.makePerspective=function(t,i,e,r,n,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,h=2*n/(i-t),a=2*n/(e-r),u=(i+t)/(i-t),c=(e+r)/(e-r),l=-(s+n)/(s-n),y=-2*s*n/(s-n);return o[0]=h,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=y,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},i.makeOrthographic=function(t,i,e,r,n,s){var o=this.elements,h=1/(i-t),a=1/(e-r),u=1/(s-n),c=(i+t)*h,l=(e+r)*a,y=(s+n)*u;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*a,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-y,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},i.equals=function(t){for(var i=this.elements,e=t.elements,r=0;r<16;r++)if(i[r]!==e[r])return!1;return!0},i.fromArray=function(t,i){void 0===i&&(i=0);for(var e=0;e<16;e++)this.elements[e]=t[e+i];return this},i.toArray=function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);var e=this.elements;return t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=e[3],t[i+4]=e[4],t[i+5]=e[5],t[i+6]=e[6],t[i+7]=e[7],t[i+8]=e[8],t[i+9]=e[9],t[i+10]=e[10],t[i+11]=e[11],t[i+12]=e[12],t[i+13]=e[13],t[i+14]=e[14],t[i+15]=e[15],t},t}(),p=new u,f=new y,v=new u(0,0,0),x=new u(1,1,1),m=new u,g=new u,d=new u;function b(){this.type="Curve",this.arcLengthDivisions=200}function w(t,i,e,r,n,s,o,h){b.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=i||0,this.xRadius=e||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=h||0}function M(t,i,e,r,n,s){w.call(this,t,i,e,e,r,n,s),this.type="ArcCurve"}function z(){var t=0,i=0,e=0,r=0;function n(n,s,o,h){t=n,i=o,e=-3*n+3*s-2*o-h,r=2*n-2*s+o+h}return{initCatmullRom:function(t,i,e,r,s){n(i,e,s*(e-t),s*(r-i))},initNonuniformCatmullRom:function(t,i,e,r,s,o,h){var a=(i-t)/s-(e-t)/(s+o)+(e-i)/o,u=(e-i)/o-(r-i)/(o+h)+(r-e)/h;n(i,e,a*=o,u*=o)},calc:function(n){var s=n*n;return t+i*n+e*s+r*(s*n)}}}Object.assign(b.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,i){var e=this.getUtoTmapping(t);return this.getPoint(e,i)},getPoints:function(t){void 0===t&&(t=5);for(var i=[],e=0;e<=t;e++)i.push(this.getPoint(e/t));return i},getSpacedPoints:function(t){void 0===t&&(t=5);for(var i=[],e=0;e<=t;e++)i.push(this.getPointAt(e/t));return i},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,e=[],r=this.getPoint(0),n=0;e.push(0);for(var s=1;s<=t;s++)n+=(i=this.getPoint(s/t)).distanceTo(r),e.push(n),r=i;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,i){var e,r=this.getLengths(),n=0,s=r.length;e=i||t*r[s-1];for(var o,h=0,a=s-1;h<=a;)if((o=r[n=Math.floor(h+(a-h)/2)]-e)<0)h=n+1;else{if(!(o>0)){a=n;break}a=n-1}if(r[n=a]===e)return n/(s-1);var u=r[n];return(n+(e-u)/(r[n+1]-u))/(s-1)},getTangent:function(t,i){var e=1e-4,r=t-e,n=t+e;r<0&&(r=0),n>1&&(n=1);var s=this.getPoint(r),o=this.getPoint(n),a=i||(s.isVector2?new h:new u);return a.copy(o).sub(s).normalize(),a},getTangentAt:function(t,i){var e=this.getUtoTmapping(t);return this.getTangent(e,i)},computeFrenetFrames:function(t,i){for(var e=new u,r=[],s=[],o=[],h=new u,a=new y,c=0;c<=t;c++){var l=c/t;r[c]=this.getTangentAt(l,new u),r[c].normalize()}s[0]=new u,o[0]=new u;var p=Number.MAX_VALUE,f=Math.abs(r[0].x),v=Math.abs(r[0].y),x=Math.abs(r[0].z);f<=p&&(p=f,e.set(1,0,0)),v<=p&&(p=v,e.set(0,1,0)),x<=p&&e.set(0,0,1),h.crossVectors(r[0],e).normalize(),s[0].crossVectors(r[0],h),o[0].crossVectors(r[0],s[0]);for(var m=1;m<=t;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),h.crossVectors(r[m-1],r[m]),h.length()>Number.EPSILON){h.normalize();var g=Math.acos(n.clamp(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(a.makeRotationAxis(h,g))}o[m].crossVectors(r[m],s[m])}if(!0===i){var d=Math.acos(n.clamp(s[0].dot(s[t]),-1,1));d/=t,r[0].dot(h.crossVectors(s[0],s[t]))>0&&(d=-d);for(var b=1;b<=t;b++)s[b].applyMatrix4(a.makeRotationAxis(r[b],d*b)),o[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),w.prototype=Object.create(b.prototype),w.prototype.constructor=w,w.prototype.isEllipseCurve=!0,w.prototype.getPoint=function(t,i){for(var e=i||new h,r=2*Math.PI,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(n=s?0:r),!0!==this.aClockwise||s||(n===r?n=-r:n-=r);var o=this.aStartAngle+t*n,a=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),y=a-this.aX,p=u-this.aY;a=y*c-p*l+this.aX,u=y*l+p*c+this.aY}return e.set(a,u)},w.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},w.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},w.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},M.prototype=Object.create(w.prototype),M.prototype.constructor=M,M.prototype.isArcCurve=!0;var _=new u,C=new z,S=new z,A=new z;function k(t,i,e,r){b.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=i||!1,this.curveType=e||"centripetal",this.tension=void 0!==r?r:.5}function P(t,i,e,r,n){var s=.5*(r-i),o=.5*(n-e),h=t*t;return(2*e-2*r+s+o)*(t*h)+(-3*e+3*r-2*s-o)*h+s*t+e}function T(t,i,e,r){return function(t,i){var e=1-t;return e*e*i}(t,i)+function(t,i){return 2*(1-t)*t*i}(t,e)+function(t,i){return t*t*i}(t,r)}function O(t,i,e,r,n){return function(t,i){var e=1-t;return e*e*e*i}(t,i)+function(t,i){var e=1-t;return 3*e*e*t*i}(t,e)+function(t,i){return 3*(1-t)*t*t*i}(t,r)+function(t,i){return t*t*t*i}(t,n)}function E(t,i,e,r){b.call(this),this.type="CubicBezierCurve",this.v0=t||new h,this.v1=i||new h,this.v2=e||new h,this.v3=r||new h}function R(t,i,e,r){b.call(this),this.type="CubicBezierCurve3",this.v0=t||new u,this.v1=i||new u,this.v2=e||new u,this.v3=r||new u}function L(t,i){b.call(this),this.type="LineCurve",this.v1=t||new h,this.v2=i||new h}function N(t,i){b.call(this),this.type="LineCurve3",this.v1=t||new u,this.v2=i||new u}function V(t,i,e){b.call(this),this.type="QuadraticBezierCurve",this.v0=t||new h,this.v1=i||new h,this.v2=e||new h}function J(t,i,e){b.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new u,this.v1=i||new u,this.v2=e||new u}function q(t){b.call(this),this.type="SplineCurve",this.points=t||[]}k.prototype=Object.create(b.prototype),k.prototype.constructor=k,k.prototype.isCatmullRomCurve3=!0,k.prototype.getPoint=function(t,i){var e,r,n=i||new u,s=this.points,o=s.length,h=(o-(this.closed?0:1))*t,a=Math.floor(h),c=h-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:0===c&&a===o-1&&(a=o-2,c=1),this.closed||a>0?e=s[(a-1)%o]:(_.subVectors(s[0],s[1]).add(s[0]),e=_);var l=s[a%o],y=s[(a+1)%o];if(this.closed||a+2<o?r=s[(a+2)%o]:(_.subVectors(s[o-1],s[o-2]).add(s[o-1]),r=_),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,f=Math.pow(e.distanceToSquared(l),p),v=Math.pow(l.distanceToSquared(y),p),x=Math.pow(y.distanceToSquared(r),p);v<1e-4&&(v=1),f<1e-4&&(f=v),x<1e-4&&(x=v),C.initNonuniformCatmullRom(e.x,l.x,y.x,r.x,f,v,x),S.initNonuniformCatmullRom(e.y,l.y,y.y,r.y,f,v,x),A.initNonuniformCatmullRom(e.z,l.z,y.z,r.z,f,v,x)}else"catmullrom"===this.curveType&&(C.initCatmullRom(e.x,l.x,y.x,r.x,this.tension),S.initCatmullRom(e.y,l.y,y.y,r.y,this.tension),A.initCatmullRom(e.z,l.z,y.z,r.z,this.tension));return n.set(C.calc(c),S.calc(c),A.calc(c)),n},k.prototype.copy=function(t){b.prototype.copy.call(this,t),this.points=[];for(var i=0,e=t.points.length;i<e;i++){var r=t.points[i];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},k.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);t.points=[];for(var i=0,e=this.points.length;i<e;i++){var r=this.points[i];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},k.prototype.fromJSON=function(t){b.prototype.fromJSON.call(this,t),this.points=[];for(var i=0,e=t.points.length;i<e;i++){var r=t.points[i];this.points.push((new u).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},E.prototype=Object.create(b.prototype),E.prototype.constructor=E,E.prototype.isCubicBezierCurve=!0,E.prototype.getPoint=function(t,i){var e=i||new h,r=this.v0,n=this.v1,s=this.v2,o=this.v3;return e.set(O(t,r.x,n.x,s.x,o.x),O(t,r.y,n.y,s.y,o.y)),e},E.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},E.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},E.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},R.prototype=Object.create(b.prototype),R.prototype.constructor=R,R.prototype.isCubicBezierCurve3=!0,R.prototype.getPoint=function(t,i){var e=i||new u,r=this.v0,n=this.v1,s=this.v2,o=this.v3;return e.set(O(t,r.x,n.x,s.x,o.x),O(t,r.y,n.y,s.y,o.y),O(t,r.z,n.z,s.z,o.z)),e},R.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},R.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},R.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},L.prototype=Object.create(b.prototype),L.prototype.constructor=L,L.prototype.isLineCurve=!0,L.prototype.getPoint=function(t,i){var e=i||new h;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},L.prototype.getPointAt=function(t,i){return this.getPoint(t,i)},L.prototype.getTangent=function(t,i){var e=i||new h;return e.copy(this.v2).sub(this.v1).normalize(),e},L.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},L.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},L.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},N.prototype=Object.create(b.prototype),N.prototype.constructor=N,N.prototype.isLineCurve3=!0,N.prototype.getPoint=function(t,i){var e=i||new u;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},N.prototype.getPointAt=function(t,i){return this.getPoint(t,i)},N.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},N.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},N.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},V.prototype=Object.create(b.prototype),V.prototype.constructor=V,V.prototype.isQuadraticBezierCurve=!0,V.prototype.getPoint=function(t,i){var e=i||new h,r=this.v0,n=this.v1,s=this.v2;return e.set(T(t,r.x,n.x,s.x),T(t,r.y,n.y,s.y)),e},V.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},V.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},V.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},J.prototype=Object.create(b.prototype),J.prototype.constructor=J,J.prototype.isQuadraticBezierCurve3=!0,J.prototype.getPoint=function(t,i){var e=i||new u,r=this.v0,n=this.v1,s=this.v2;return e.set(T(t,r.x,n.x,s.x),T(t,r.y,n.y,s.y),T(t,r.z,n.z,s.z)),e},J.prototype.copy=function(t){return b.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},J.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},J.prototype.fromJSON=function(t){return b.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},q.prototype=Object.create(b.prototype),q.prototype.constructor=q,q.prototype.isSplineCurve=!0,q.prototype.getPoint=function(t,i){var e=i||new h,r=this.points,n=(r.length-1)*t,s=Math.floor(n),o=n-s,a=r[0===s?s:s-1],u=r[s],c=r[s>r.length-2?r.length-1:s+1],l=r[s>r.length-3?r.length-1:s+2];return e.set(P(o,a.x,u.x,c.x,l.x),P(o,a.y,u.y,c.y,l.y)),e},q.prototype.copy=function(t){b.prototype.copy.call(this,t),this.points=[];for(var i=0,e=t.points.length;i<e;i++){var r=t.points[i];this.points.push(r.clone())}return this},q.prototype.toJSON=function(){var t=b.prototype.toJSON.call(this);t.points=[];for(var i=0,e=this.points.length;i<e;i++){var r=this.points[i];t.points.push(r.toArray())}return t},q.prototype.fromJSON=function(t){b.prototype.fromJSON.call(this,t),this.points=[];for(var i=0,e=t.points.length;i<e;i++){var r=t.points[i];this.points.push((new h).fromArray(r))}return this};var Z=Object.freeze({__proto__:null,ArcCurve:M,CatmullRomCurve3:k,CubicBezierCurve:E,CubicBezierCurve3:R,EllipseCurve:w,LineCurve:L,LineCurve3:N,QuadraticBezierCurve:V,QuadraticBezierCurve3:J,SplineCurve:q});function F(){b.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function H(t){F.call(this),this.type="Path",this.currentPoint=new h,t&&this.setFromPoints(t)}function j(t){H.call(this,t),this.uuid=n.generateUUID(),this.type="Shape",this.holes=[]}F.prototype=Object.assign(Object.create(b.prototype),{constructor:F,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new L(i,t))},getPoint:function(t){for(var i=t*this.getLength(),e=this.getCurveLengths(),r=0;r<e.length;){if(e[r]>=i){var n=e[r]-i,s=this.curves[r],o=s.getLength(),h=0===o?0:1-n/o;return s.getPointAt(h)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,e=0,r=this.curves.length;e<r;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var i=[],e=0;e<=t;e++)i.push(this.getPoint(e/t));return this.autoClose&&i.push(i[0]),i},getPoints:function(t){t=t||12;for(var i,e=[],r=0,n=this.curves;r<n.length;r++)for(var s=n[r],o=s&&s.isEllipseCurve?2*t:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,h=s.getPoints(o),a=0;a<h.length;a++){var u=h[a];i&&i.equals(u)||(e.push(u),i=u)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){b.prototype.copy.call(this,t),this.curves=[];for(var i=0,e=t.curves.length;i<e;i++){var r=t.curves[i];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=b.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var i=0,e=this.curves.length;i<e;i++){var r=this.curves[i];t.curves.push(r.toJSON())}return t},fromJSON:function(t){b.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var i=0,e=t.curves.length;i<e;i++){var r=t.curves[i];this.curves.push((new Z[r.type]).fromJSON(r))}return this}}),H.prototype=Object.assign(Object.create(F.prototype),{constructor:H,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var i=1,e=t.length;i<e;i++)this.lineTo(t[i].x,t[i].y);return this},moveTo:function(t,i){return this.currentPoint.set(t,i),this},lineTo:function(t,i){var e=new L(this.currentPoint.clone(),new h(t,i));return this.curves.push(e),this.currentPoint.set(t,i),this},quadraticCurveTo:function(t,i,e,r){var n=new V(this.currentPoint.clone(),new h(t,i),new h(e,r));return this.curves.push(n),this.currentPoint.set(e,r),this},bezierCurveTo:function(t,i,e,r,n,s){var o=new E(this.currentPoint.clone(),new h(t,i),new h(e,r),new h(n,s));return this.curves.push(o),this.currentPoint.set(n,s),this},splineThru:function(t){var i=new q([this.currentPoint.clone()].concat(t));return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,i,e,r,n,s){var o=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+o,i+h,e,r,n,s),this},absarc:function(t,i,e,r,n,s){return this.absellipse(t,i,e,e,r,n,s),this},ellipse:function(t,i,e,r,n,s,o,h){var a=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+a,i+u,e,r,n,s,o,h),this},absellipse:function(t,i,e,r,n,s,o,h){var a=new w(t,i,e,r,n,s,o,h);if(this.curves.length>0){var u=a.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(a);var c=a.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return F.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=F.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return F.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),j.prototype=Object.assign(Object.create(H.prototype),{constructor:j,getPointsHoles:function(t){for(var i=[],e=0,r=this.holes.length;e<r;e++)i[e]=this.holes[e].getPoints(t);return i},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){H.prototype.copy.call(this,t),this.holes=[];for(var i=0,e=t.holes.length;i<e;i++){var r=t.holes[i];this.holes.push(r.clone())}return this},toJSON:function(){var t=H.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var i=0,e=this.holes.length;i<e;i++){var r=this.holes[i];t.holes.push(r.toJSON())}return t},fromJSON:function(t){H.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var i=0,e=t.holes.length;i<e;i++){var r=t.holes[i];this.holes.push((new H).fromJSON(r))}return this}});var X={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Y={h:0,s:0,l:0},B={h:0,s:0,l:0};function I(t,i,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+6*(i-t)*(2/3-e):t}function U(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Q(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var D=function(){function t(t,i,e){return Object.defineProperty(this,"isColor",{value:!0}),void 0===i&&void 0===e?this.set(t):this.setRGB(t,i,e)}var i=t.prototype;return i.set=function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},i.setScalar=function(t){return this.r=t,this.g=t,this.b=t,this},i.setHex=function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},i.setRGB=function(t,i,e){return this.r=t,this.g=i,this.b=e,this},i.setHSL=function(t,i,e){if(t=n.euclideanModulo(t,1),i=n.clamp(i,0,1),e=n.clamp(e,0,1),0===i)this.r=this.g=this.b=e;else{var r=e<=.5?e*(1+i):e+i-e*i,s=2*e-r;this.r=I(s,r,t+1/3),this.g=I(s,r,t),this.b=I(s,r,t-1/3)}return this},i.setStyle=function(t){function i(i){void 0!==i&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,n=e[1],s=e[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,i(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,i(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var o=parseFloat(r[1])/360,h=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100;return i(r[5]),this.setHSL(o,h,a)}}}else if(e=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=e[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},i.setColorName=function(t){var i=X[t];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this},i.clone=function(){return new this.constructor(this.r,this.g,this.b)},i.copy=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},i.copyGammaToLinear=function(t,i){return void 0===i&&(i=2),this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},i.copyLinearToGamma=function(t,i){void 0===i&&(i=2);var e=i>0?1/i:1;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},i.convertGammaToLinear=function(t){return this.copyGammaToLinear(this,t),this},i.convertLinearToGamma=function(t){return this.copyLinearToGamma(this,t),this},i.copySRGBToLinear=function(t){return this.r=U(t.r),this.g=U(t.g),this.b=U(t.b),this},i.copyLinearToSRGB=function(t){return this.r=Q(t.r),this.g=Q(t.g),this.b=Q(t.b),this},i.convertSRGBToLinear=function(){return this.copySRGBToLinear(this),this},i.convertLinearToSRGB=function(){return this.copyLinearToSRGB(this),this},i.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},i.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)},i.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var i,e,r=this.r,n=this.g,s=this.b,o=Math.max(r,n,s),h=Math.min(r,n,s),a=(h+o)/2;if(h===o)i=0,e=0;else{var u=o-h;switch(e=a<=.5?u/(o+h):u/(2-o-h),o){case r:i=(n-s)/u+(n<s?6:0);break;case n:i=(s-r)/u+2;break;case s:i=(r-n)/u+4}i/=6}return t.h=i,t.s=e,t.l=a,t},i.getStyle=function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},i.offsetHSL=function(t,i,e){return this.getHSL(Y),Y.h+=t,Y.s+=i,Y.l+=e,this.setHSL(Y.h,Y.s,Y.l),this},i.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},i.addColors=function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},i.addScalar=function(t){return this.r+=t,this.g+=t,this.b+=t,this},i.sub=function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},i.multiply=function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},i.multiplyScalar=function(t){return this.r*=t,this.g*=t,this.b*=t,this},i.lerp=function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},i.lerpHSL=function(t,i){this.getHSL(Y),t.getHSL(B);var e=n.lerp(Y.h,B.h,i),r=n.lerp(Y.s,B.s,i),s=n.lerp(Y.l,B.l,i);return this.setHSL(e,r,s),this},i.equals=function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},i.fromArray=function(t,i){return void 0===i&&(i=0),this.r=t[i],this.g=t[i+1],this.b=t[i+2],this},i.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t},i.fromBufferAttribute=function(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},i.toJSON=function(){return this.getHex()},t}();D.NAMES=X,D.prototype.r=1,D.prototype.g=1,D.prototype.b=1;var G=function(t,i,e){e=e||2;var r,n,s,o,h,a,u,c=i&&i.length,l=c?i[0]*e:t.length,y=W(t,0,l,e,!0),p=[];if(!y||y.next===y.prev)return p;if(c&&(y=function(t,i,e,r){var n,s,o,h=[];for(n=0,s=i.length;n<s;n++)(o=W(t,i[n]*r,n<s-1?i[n+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),h.push(at(o));for(h.sort(nt),n=0;n<h.length;n++)st(h[n],e),e=$(e,e.next);return e}(t,i,y,e)),t.length>80*e){r=s=t[0],n=o=t[1];for(var f=e;f<l;f+=e)(h=t[f])<r&&(r=h),(a=t[f+1])<n&&(n=a),h>s&&(s=h),a>o&&(o=a);u=0!==(u=Math.max(s-r,o-n))?1/u:0}return K(y,p,e,r,n,u),p};function W(t,i,e,r,n){var s,o;if(n===function(t,i,e,r){for(var n=0,s=i,o=e-r;s<e;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}(t,i,e,r)>0)for(s=i;s<e;s+=r)o=gt(s,t[s],t[s+1],o);else for(s=e-r;s>=i;s-=r)o=gt(s,t[s],t[s+1],o);return o&&yt(o,o.next)&&(dt(o),o=o.next),o}function $(t,i){if(!t)return t;i||(i=t);var e,r=t;do{if(e=!1,r.steiner||!yt(r,r.next)&&0!==lt(r.prev,r,r.next))r=r.next;else{if(dt(r),(r=i=r.prev)===r.next)break;e=!0}}while(e||r!==i);return i}function K(t,i,e,r,n,s,o){if(t){!o&&s&&function(t,i,e,r){var n=t;do{null===n.z&&(n.z=ht(n.x,n.y,i,e,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var i,e,r,n,s,o,h,a,u=1;do{for(e=t,t=null,s=null,o=0;e;){for(o++,r=e,h=0,i=0;i<u&&(h++,r=r.nextZ);i++);for(a=u;h>0||a>0&&r;)0!==h&&(0===a||!r||e.z<=r.z)?(n=e,e=e.nextZ,h--):(n=r,r=r.nextZ,a--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;e=r}s.nextZ=null,u*=2}while(o>1)}(n)}(t,r,n,s);for(var h,a,u=t;t.prev!==t.next;)if(h=t.prev,a=t.next,s?it(t,r,n,s):tt(t))i.push(h.i/e),i.push(t.i/e),i.push(a.i/e),dt(t),t=a.next,u=a.next;else if((t=a)===u){o?1===o?K(t=et($(t),i,e),i,e,r,n,s,2):2===o&&rt(t,i,e,r,n,s):K($(t),i,e,r,n,s,1);break}}}function tt(t){var i=t.prev,e=t,r=t.next;if(lt(i,e,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(ut(i.x,i.y,e.x,e.y,r.x,r.y,n.x,n.y)&&lt(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function it(t,i,e,r){var n=t.prev,s=t,o=t.next;if(lt(n,s,o)>=0)return!1;for(var h=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,a=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,u=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,c=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,l=ht(h,a,i,e,r),y=ht(u,c,i,e,r),p=t.prevZ,f=t.nextZ;p&&p.z>=l&&f&&f.z<=y;){if(p!==t.prev&&p!==t.next&&ut(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&lt(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&ut(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&lt(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&ut(n.x,n.y,s.x,s.y,o.x,o.y,p.x,p.y)&&lt(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=y;){if(f!==t.prev&&f!==t.next&&ut(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&lt(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function et(t,i,e){var r=t;do{var n=r.prev,s=r.next.next;!yt(n,s)&&pt(n,r,r.next,s)&&xt(n,s)&&xt(s,n)&&(i.push(n.i/e),i.push(r.i/e),i.push(s.i/e),dt(r),dt(r.next),r=t=s),r=r.next}while(r!==t);return $(r)}function rt(t,i,e,r,n,s){var o=t;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&ct(o,h)){var a=mt(o,h);return o=$(o,o.next),a=$(a,a.next),K(o,i,e,r,n,s),void K(a,i,e,r,n,s)}h=h.next}o=o.next}while(o!==t)}function nt(t,i){return t.x-i.x}function st(t,i){if(i=function(t,i){var e,r=i,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=n&&h>o){if(o=h,h===n){if(s===r.y)return r;if(s===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}r=r.next}while(r!==i);if(!e)return null;if(n===o)return e;var a,u=e,c=e.x,l=e.y,y=1/0;r=e;do{n>=r.x&&r.x>=c&&n!==r.x&&ut(s<l?n:o,s,c,l,s<l?o:n,s,r.x,r.y)&&(a=Math.abs(s-r.y)/(n-r.x),xt(r,t)&&(a<y||a===y&&(r.x>e.x||r.x===e.x&&ot(e,r)))&&(e=r,y=a)),r=r.next}while(r!==u);return e}(t,i)){var e=mt(i,t);$(i,i.next),$(e,e.next)}}function ot(t,i){return lt(t.prev,t,i.prev)<0&&lt(i.next,t,t.next)<0}function ht(t,i,e,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-r)*n)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function at(t){var i=t,e=t;do{(i.x<e.x||i.x===e.x&&i.y<e.y)&&(e=i),i=i.next}while(i!==t);return e}function ut(t,i,e,r,n,s,o,h){return(n-o)*(i-h)-(t-o)*(s-h)>=0&&(t-o)*(r-h)-(e-o)*(i-h)>=0&&(e-o)*(s-h)-(n-o)*(r-h)>=0}function ct(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==i.i&&e.next.i!==i.i&&pt(e,e.next,t,i))return!0;e=e.next}while(e!==t);return!1}(t,i)&&(xt(t,i)&&xt(i,t)&&function(t,i){var e=t,r=!1,n=(t.x+i.x)/2,s=(t.y+i.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next}while(e!==t);return r}(t,i)&&(lt(t.prev,t,i.prev)||lt(t,i.prev,i))||yt(t,i)&&lt(t.prev,t,t.next)>0&&lt(i.prev,i,i.next)>0)}function lt(t,i,e){return(i.y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y)}function yt(t,i){return t.x===i.x&&t.y===i.y}function pt(t,i,e,r){var n=vt(lt(t,i,e)),s=vt(lt(t,i,r)),o=vt(lt(e,r,t)),h=vt(lt(e,r,i));return n!==s&&o!==h||(!(0!==n||!ft(t,e,i))||(!(0!==s||!ft(t,r,i))||(!(0!==o||!ft(e,t,r))||!(0!==h||!ft(e,i,r)))))}function ft(t,i,e){return i.x<=Math.max(t.x,e.x)&&i.x>=Math.min(t.x,e.x)&&i.y<=Math.max(t.y,e.y)&&i.y>=Math.min(t.y,e.y)}function vt(t){return t>0?1:t<0?-1:0}function xt(t,i){return lt(t.prev,t,t.next)<0?lt(t,i,t.next)>=0&&lt(t,t.prev,i)>=0:lt(t,i,t.prev)<0||lt(t,t.next,i)<0}function mt(t,i){var e=new bt(t.i,t.x,t.y),r=new bt(i.i,i.x,i.y),n=t.next,s=i.prev;return t.next=i,i.prev=t,e.next=n,n.prev=e,r.next=e,e.prev=r,s.next=r,r.prev=s,r}function gt(t,i,e,r){var n=new bt(t,i,e);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function dt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function bt(t,i,e){this.i=t,this.x=i,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var wt={area:function(t){for(var i=t.length,e=0,r=i-1,n=0;n<i;r=n++)e+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*e},isClockWise:function(t){return wt.area(t)<0},triangulateShape:function(t,i){var e=[],r=[],n=[];Mt(t),zt(e,t);var s=t.length;i.forEach(Mt);for(var o=0;o<i.length;o++)r.push(s),s+=i[o].length,zt(e,i[o]);for(var h=G(e,r),a=0;a<h.length;a+=3)n.push(h.slice(a,a+3));return n}};function Mt(t){var i=t.length;i>2&&t[i-1].equals(t[0])&&t.pop()}function zt(t,i){for(var e=0;e<i.length;e++)t.push(i[e].x),t.push(i[e].y)}function _t(){this.type="ShapePath",this.color=new D,this.subPaths=[],this.currentPath=null}function Ct(t){this.type="Font",this.data=t}function St(t,i,e,r,n){var s=n.glyphs[t]||n.glyphs["?"];if(s){var o,h,a,u,c,l,y,p,f=new _t;if(s.o)for(var v=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),x=0,m=v.length;x<m;){switch(v[x++]){case"m":o=v[x++]*i+e,h=v[x++]*i+r,f.moveTo(o,h);break;case"l":o=v[x++]*i+e,h=v[x++]*i+r,f.lineTo(o,h);break;case"q":a=v[x++]*i+e,u=v[x++]*i+r,c=v[x++]*i+e,l=v[x++]*i+r,f.quadraticCurveTo(c,l,a,u);break;case"b":a=v[x++]*i+e,u=v[x++]*i+r,c=v[x++]*i+e,l=v[x++]*i+r,y=v[x++]*i+e,p=v[x++]*i+r,f.bezierCurveTo(c,l,y,p,a,u)}}return{offsetX:s.ha*i,path:f}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+n.familyName+".")}Object.assign(_t.prototype,{moveTo:function(t,i){return this.currentPath=new H,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this},lineTo:function(t,i){return this.currentPath.lineTo(t,i),this},quadraticCurveTo:function(t,i,e,r){return this.currentPath.quadraticCurveTo(t,i,e,r),this},bezierCurveTo:function(t,i,e,r,n,s){return this.currentPath.bezierCurveTo(t,i,e,r,n,s),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,i){function e(t){for(var i=[],e=0,r=t.length;e<r;e++){var n=t[e],s=new j;s.curves=n.curves,i.push(s)}return i}function r(t,i){for(var e=i.length,r=!1,n=e-1,s=0;s<e;n=s++){var o=i[n],h=i[s],a=h.x-o.x,u=h.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=i[s],a=-a,h=i[n],u=-u),t.y<o.y||t.y>h.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-a*(t.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==o.y)continue;if(h.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=h.x)return!0}}return r}var n,s,o,h=wt.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===i)return e(a);var u=[];if(1===a.length)return s=a[0],(o=new j).curves=s.curves,u.push(o),u;var c=!h(a[0].getPoints());c=t?!c:c;var l,y,p=[],f=[],v=[],x=0;f[x]=void 0,v[x]=[];for(var m=0,g=a.length;m<g;m++)n=h(l=(s=a[m]).getPoints()),(n=t?!n:n)?(!c&&f[x]&&x++,f[x]={s:new j,p:l},f[x].s.curves=s.curves,c&&x++,v[x]=[]):v[x].push({h:s,p:l[0]});if(!f[0])return e(a);if(f.length>1){for(var d=!1,b=[],w=0,M=f.length;w<M;w++)p[w]=[];for(var z=0,_=f.length;z<_;z++)for(var C=v[z],S=0;S<C.length;S++){for(var A=C[S],k=!0,P=0;P<f.length;P++)r(A.p,f[P].p)&&(z!==P&&b.push({froms:z,tos:P,hole:S}),k?(k=!1,p[P].push(A)):d=!0);k&&p[z].push(A)}b.length>0&&(d||(v=p))}for(var T=0,O=f.length;T<O;T++){o=f[T].s,u.push(o);for(var E=0,R=(y=v[T]).length;E<R;E++)o.holes.push(y[E].h)}return u}}),Object.assign(Ct.prototype,{isFont:!0,generateShapes:function(t,i){void 0===i&&(i=100);for(var e=[],r=function(t,i,e){for(var r=Array.from?Array.from(t):String(t).split(""),n=i/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n,o=[],h=0,a=0,u=0;u<r.length;u++){var c=r[u];if("\n"===c)h=0,a-=s;else{var l=St(c,n,h,a,e);h+=l.offsetX,o.push(l.path)}}return o}(t,i,this.data),n=0,s=r.length;n<s;n++)Array.prototype.push.apply(e,r[n].toShapes());return e}}),t.ArcCurve=M,t.CatmullRomCurve3=k,t.CubicBezierCurve=E,t.CubicBezierCurve3=R,t.Curve=b,t.CurvePath=F,t.EllipseCurve=w,t.Font=Ct,t.LineCurve=L,t.LineCurve3=N,t.Path=H,t.QuadraticBezierCurve=V,t.QuadraticBezierCurve3=J,t.Shape=j,t.ShapePath=_t,t.ShapeUtils=wt,t.SplineCurve=q,Object.defineProperty(t,"__esModule",{value:!0})}));
